{{block "index" .}}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Index Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.7/dist/htmx.min.js" integrity="sha384-ZBXiYtYQ6hJ2Y0ZNoYuI+Nq5MqWBr+chMrS/RkXpNzQCApHEhOt2aY8EJgqwHLkJ" crossorigin="anonymous"></script>
</head>
<body>
    <div class="container mt-5">
        <header class="text-center mb-4">
            <h1 class="display-4">{{.Title}}</h1>
        </header>
        
        {{template "form" .}}
        <hr>
        {{template "table" .}}
        
        <footer class="pt-3 mt-4 text-muted border-top text-center">
            <p>&copy; 2025 My Website</p>
        </footer>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>
{{end}}

{{block "table" .}}
<table class="table table-striped">
    <thead>
        <tr>
            <th scope="col">ID</th>
            <th scope="col">Name</th>
            <th scope="col">Amount</th>
            <th scope="col">Type</th>
        </tr>
    </thead>
    <tbody id="finances">
        {{template "finances" .}}
    </tbody>
</table>
{{end}}

{{block "finances" .}}
{{range .Finances}}
    {{template "finance_row" .}}
{{end}}
{{end}}

{{block "form" .}}
<form hx-swap="beforeend" hx-target="#finances" hx-post="/render/finances">
    <div class="form-group">
        <label>Name</label>
        <input type="text" class="form-control" placeholder="Enter name" name="name">
    </div>
    <div class="form-group">
        <label>Amount</label>
        <input type="number" class="form-control" placeholder="Enter amount" name="amount">
    </div>
    <div class="form-group">
        <label>Type</label>
        <input type="text" class="form-control" placeholder="Enter category" name="category">
    </div>
    <button type="submit" class="btn btn-primary">Add</button>
</form>
{{end}}

{{block "finance_row" .}}
<tr id="finance_{{.Id}}">
    <td>{{.Id}}</td>
    <td>{{.Name}}</td>
    <td>{{.Amount}}</td>
    <td>{{.Category}}</td>
    <td>
        <button hx-get="render/finances/edit/{{.Id}}" hx-target="closest tr" hx-swap="outerHTML" class="btn btn-primary btn-sm">
            Edit
        </button>
    </td>
    <td>
        <button hx-delete="/finances/{{.Id}}" hx-target="closest tr" hx-swap="outerHTML" class="btn btn-danger btn-sm">Delete</button>
    </td>
</tr>
{{end}}

{{block "finance_row_edit" .}}
<tr id="finance_{{.Id}}">
    <td>{{.Id}}</td>
    <td><input type="text" name="name" value="{{.Name}}" class="form-control"></td>
    <td><input type="number" name="amount" value="{{.Amount}}" class="form-control"></td>
    <td><input type="text" name="category" value="{{.Category}}" class="form-control"></td>
    <td>
        <button 
            hx-patch="render/finances/{{.Id}}" 
            hx-include="closest tr"
            hx-target="closest tr"
            hx-swap="outerHTML"
            class="btn btn-success btn-sm">
            Save
        </button>
    </td>
    <td>
         <button 
            hx-get="render/finances/{{.Id}}"
            hx-target="closest tr"
            hx-swap="outerHTML"
            class="btn btn-secondary btn-sm">
            Cancel
        </button>
    </td>
</tr>
{{end}}